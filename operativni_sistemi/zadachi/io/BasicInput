package dexter_io;

import java.io.*;

public class Zadaca1 {

	public static void main(String[] args) throws IOException {
		// TODO Auto-generated method stub
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		String din = br.readLine();
		String dout = br.readLine();
		
		File datin = new File(din);
		File datout = new File(dout);
		File writeTo = new File("write-here.txt");
		
		if(datout.exists()) {
			deleteRec(datout);
		}
		if(!datout.exists()) {
			datout.mkdir();
			System.out.println("Creating folder: " + datout);
		}
		
		if(datin.exists()) {
			File[] files = datin.listFiles();
			for(File f : files) {
				if(f.isFile() && f.getName().endsWith(".txt") && f.length() < 10) {
					File fnew = new File(datout + "/" + f.getName());
					System.out.print("Moving file: " + f.getName() + " ");
					f.renameTo(fnew);
					System.out.println("to " + fnew.getAbsolutePath());
				}
				else if(f.isFile() && f.getName().endsWith(".txt") && f.length() >= 10) {
					RandomAccessFile read = null;
					RandomAccessFile write = null;
					
					try {
						read = new RandomAccessFile(f, "r");
						write = new RandomAccessFile(writeTo, "rw");
						
						write.seek(write.length());
						
						int c;
						
						while((c=read.read()) != -1) {
							write.write(c);
						}
						System.out.println("Writing contents of: " + f.getAbsolutePath() + " to " + writeTo.getAbsolutePath());
					} catch (Exception e) {}
					finally {
						if(read != null) {
							read.close();
						}
						if(write != null) {
							write.close();
						}
					}
				}
			}
		}
		else {
			System.out.println("Vleznata datoteka ne postoi!");
		}
	}

	public static void deleteRec(File datout) {
		// TODO Auto-generated method stub
		File[] files = datout.listFiles();
		for(File f : files) {
			if(f.isDirectory()) {
				deleteRec(f);
			}
			else if(f.isFile()){
				System.out.println("Deleting file: " + f.getAbsolutePath());
				f.delete();
			}
		}
		System.out.println("Deleting folder: " + datout.getAbsolutePath());
		datout.delete();
	}

}
